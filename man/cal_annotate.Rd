% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cal_annotate.R
\name{cal_annotate}
\alias{cal_annotate}
\title{Annotate sensor calibration data as good or bad}
\usage{
cal_annotate(raw_calibration_df)
}
\arguments{
\item{raw_calibration_df}{A dataframe containing calibration data with nested
calibration coefficients. Must include:
\itemize{
\item sensor: Sensor type identifier
\item calibration_coefs: Nested list column containing offset and slope values
}}
}
\value{
A dataframe with the same structure as input, plus a \code{correct_calibration}
logical column indicating whether each calibration meets quality criteria:
\itemize{
\item TRUE: Calibration parameters are within acceptable statistical bounds
\item FALSE: Calibration parameters are outliers or contain invalid values
\item All columns from original calibration data are preserved
}

The function handles sensors with missing data by evaluating only available
parameters and marks calibrations as bad when insufficient valid data exists.
}
\description{
Evaluates calibration data quality using statistical outlier detection based on
offset and slope parameters. Calibrations are flagged as good or bad by comparing
each calibration's parameters against the distribution of all calibrations for
that sensor type, using a 3-standard deviation threshold.

The function processes calibration data by sensor type, calculates statistical
bounds for offset and slope parameters, and flags calibrations that fall outside
acceptable ranges. This approach assumes that the majority of calibrations are
good and that truly problematic calibrations will appear as statistical outliers.
The method can be adjusted by modifying the threshold criteria.
}
\details{
The current implementation uses a 3-standard deviation threshold for outlier
detection, but this method is not fully vetted and subject to change. The
approach compares all calibrations against each other within sensor types,
which assumes that bad calibrations represent a minority of the dataset.
}
\examples{
\dontrun{
# Process calibration data with quality flags
# `read_calibration_file()` is pseudo code, not a real function
calibration_data <- read_calibration_file("calibration_data.csv")
annotated_data <- annotate_calibration_data(calibration_data)

# Check flagging results
table(annotated_data$correct_calibration)
}
}
